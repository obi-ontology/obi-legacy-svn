<?xml version="1.0"?>


<!-- OBI Library -->
<!-- Build file for Ant -->


<project name="OBITools" default="usage" basedir=".">
    <!-- ================== -->
    <!-- Target properties. -->
    <!-- ================== -->
    <property name="jar.dir" value="JarDir"/>
    <property name="end.dir" value="jar" />
    <property name="sources.obi" value="src/ca/bccrc/obi" />
    <property name="binary" value="bin" />
    <property name="libs" value="lib" />
    <property name="docs" value="doc" />
    <property name="src" value="src" />
    <property environment="env"/>



    <!-- =================================================================== -->
    <!-- Help on usage                                                       -->
    <!-- =================================================================== -->
    <target name="usage">
        <echo message=""/>
        <echo message=""/>
        <echo message="OBI Tools Build file"/>
        <echo message="-------------------------------------------------------------"/>
        <echo message=""/>
        <echo message="  available targets are:"/>
        <echo message=""/>
        <echo message="   init       --> set the timestamps"/>
        <echo message="   jarFull    --> generates the full jar file (including external librairies)"/>
        <echo message="   jarSimple  --> generates the simple jar file (no external librairies included)"/>
        <echo message="   javadoc    --> generates the API documentation"/>
        <echo message="   allFull    --> generates the full jar: OBITools, javadoc and external librairies"/>
        <echo message="   allSimple  --> generates the simple jar: OBITools and javadoc"/>
        <echo message=""/>
        <echo message=" See the comments inside the build.xml file for more details."/>
        <echo message="-------------------------------------------------------------"/>
        <echo message=""/>
        <echo message=""/>
    </target>

    <path id="classpath">
        <fileset dir="${libs}">
            <include name="*.jar"/>
        </fileset>
    </path>
    <target name="clean">
        <delete dir="${jar.dir}"/>
        <delete dir="${jar.dir}/${docs}"/>
        <delete dir="${jar.dir}/${binary}"/>
    </target>
    <target name="prepare" depends="clean">
        <mkdir dir="${jar.dir}"/>
        <mkdir dir="${jar.dir}/${docs}"/>
        <mkdir dir="${jar.dir}/${binary}"/>
        <mkdir dir="${jar.dir}/${end.dir}"/>
    </target>

    <!-- ================== -->
    <!-- Initialization     -->
    <!-- ================== -->
    <target name="init" description="Setting Timestamps" depends="prepare">
        <tstamp>
            <format property="DATE_SUFFIX" pattern="yyyyddMM-hhmm" />
            <format property="DATE_SIMPLE" pattern="MMM yyyy" />
        </tstamp>
    </target>

    <!-- ============================================================================= -->
    <!-- Compilation      <include name="**/*.java"/>                                                             -->
    <!--  -->
    <!--                       -->
    <!-- ============================================================================= -->
    <target name="compile">
        <javac srcdir="${sources.obi}"
               destdir="${jar.dir}/${binary}">
            <include name="OBIMerger.java"/>
            <classpath refid="classpath"/>
        </javac>
    </target>

    <!-- ================================== -->
    <!-- Generation full jar                -->
    <!-- includes all external librairies   -->
    <!-- ================================== -->
    <target name="jarFull" depends="init,compile" description="Generate the full jar of the library">

        <jar destfile="${jar.dir}/${end.dir}/OBITools.jar" basedir="${jar.dir}/${binary}">
            <fileset dir="${jar.dir}/${binary}" />
        	<zipfileset src="${libs}/arq-extra.jar" />
        	<zipfileset src="${libs}/arq.jar" />
        	<zipfileset src="${libs}/aterm-java-1.6.jar" />
        	<zipfileset src="${libs}/commons-logging-1.0.4.jar" />
        	<zipfileset src="${libs}/icu4j_3_4.jar" />
        	<zipfileset src="${libs}/iri.jar" />
            <zipfileset src="${libs}/jena.jar" />
        	<zipfileset src="${libs}/json.jar" />
        	<zipfileset src="${libs}/owlsyntax.jar" />
        	<zipfileset src="${libs}/pellet.jar" />
        	<zipfileset src="${libs}/relaxngDatatype.jar" />
        	<zipfileset src="${libs}/stax-api-1.0.jar" />
        	<zipfileset src="${libs}/wstx-asl-3.0.0.jar" />
            <zipfileset src="${libs}/xerces-2.6.0.jar" />
        	<zipfileset src="${libs}/xercesImpl.jar" />
        	<zipfileset src="${libs}/xsdlib.jar" />
        	<zipfileset src="${libs}/commons-httpclient-3.1.jar" />
        	<zipfileset src="${libs}/commons-codec-1.3.jar" />
        	
        	
        	
        	
            <!--<fileset dir="./">
                <include name="COPYING.txt" />
                <include name="README.txt" />
                <include name="log4j.properties" />
            </fileset>-->
            <manifest>
                <attribute name="Author" value="Melanie Courtot" />
                <section name="Shared">
                    <attribute name="Title" value="OBITools Library" />
                    <attribute name="Vendor" value="BCCRC, Terry Fox Laboratory" />
                    <attribute name="Date" value="${TODAY}" />
                </section>
                <section name="Copyright">
                    <attribute name="Copy" value="Copyright (C) 2007 Melanie Courtot, under the terms of the GNU GPL" />
                </section>
            </manifest>
        </jar>
    </target>

    <!-- ================================== -->
    <!-- Generation simple jar              -->
    <!-- no external librairies included    -->
    <!-- ================================== -->
    <target name="jarSimple" depends="init,compile" description="Generate the simple jar of the library">
        <!--<delete dir="${simpleJar}" />-->
        <!--<mkdir dir="${simpleJar}" />-->

        <jar destfile="${jar.dir}/${end.dir}/OBITools-${DSTAMP}.jar" basedir="${jar.dir}/${binary}">
            <fileset dir="${jar.dir}/${binary}" />
            <!--<fileset dir="./">
                <include name="COPYING.txt" />
                <include name="README.txt" />
            </fileset>-->
            <manifest>
                <attribute name="Author" value="Melanie Courtot" />
                <section name="Shared">
                    <attribute name="Title" value="OBITools Library" />
                    <attribute name="Vendor" value="BCCRC, Terry Fox Laboratory" />
                    <attribute name="Date" value="${TODAY}" />
                </section>
                <section name="Copyright">
                    <attribute name="Copy" value="Copyright (C) 2007 Melanie Courtot, under the terms of the GNU GPL" />
                </section>
            </manifest>
        </jar>
    </target>

    <!-- ===================== -->
    <!-- Generation javadoc    -->
    <!-- ===================== -->
    <target name="javadoc" depends="init" description="Generate the javadoc">

        <javadoc packagenames="ca.*"
            sourcepath="${src}"
                destdir="${jar.dir}/${docs}"
                author="true"
                version="true"
                use="true"
                windowtitle="OBITools Library"
                classpathref="classpath"
                breakiterator="true">

            <doctitle>OBITools Library</doctitle>
            <bottom>BCCRC, Terry Fox Laboratory - ${DATE_SIMPLE}</bottom>
            <link href="http://java.sun.com/j2se/1.4.2/docs/api"/>
        </javadoc>
    </target>

    <!-- ========================================================================= -->
    <!-- Global targets                                                            -->
    <!-- allFull: generates the full jar: SBOWS, javadoc and external librairies.  -->
    <!-- allSimple: generates the simple jar: SBOWS and javadoc                    -->
    <!-- ========================================================================= -->
    <target name="allFull" depends="jarFull, javadoc" description="Generate the full jar and the doc" />
    <target name="allSimple" depends="jarSimple, javadoc" description="Generate the simple jar and the doc" />
</project>

