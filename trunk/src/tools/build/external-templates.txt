default endpoint:http://sparql.obo.neurocommons.org/sparql/

# define the prefixes that will be added to all queries

prefix:rdfs: <http://www.w3.org/2000/01/rdf-schema#>
prefix:owl: <http://www.w3.org/2002/07/owl#>
prefix:obi: <http://purl.obofoundry.org/obo/>
prefix:tax: <http://purl.org/obo/owl/NCBITaxon#NCBITaxon>
prefix:obo: <http://www.geneontology.org/formats/oboInOwl#>
prefix:iao: <http://purl.obofoundry.org/obo/>

# give names to our annotation properties

alias:preferredTerm=iao:IAO_0000111
alias:definition=iao:IAO_0000115

# give names to the top obi taxa 
alias:bacteria=tax:_2
alias:eukaryota=tax:_2759
alias:archaea=tax:_2157
alias:viruses=tax:_10239
alias:cellularOrganism=tax:_131567

# get the labels for the 4 classes we import into obi. No definitions in NCBI taxonomy. 
# Maybe pick up synonyms later.
== once only ==
construct
 { ?super rdf:type owl:Class.
   ?super rdfs:label ?label.
 }
where
 { ?super rdfs:label ?label.
   {?super rdfs:subClassOf tax:_1} UNION {?super rdfs:subClassOf alias:cellularOrganism}
   FILTER ((?super=alias:bacteria) || (?super=alias:eukaryota) || (?super=alias:viruses) || (?super=alias:archaea))
 }  

# Get the taxon term and superclasses up to the 4 we include in OBI, and labels for them
== http://purl.org/obo/owl/NCBITaxon == 
construct
 { ?super rdf:type owl:Class.
   ?super rdfs:subClassOf ?parent.
   ?super alias:preferredTerm ?label.
   ?super rdfs:label ?label.
 }
 where  
  {
     {  #direct superclass. We harvest the transitive superclass annotations
	graph <http://purl.org/science/graph/taxon/inferred>
        { _ID_GOES_HERE_ rdfs:subClassOf ?super. }
        { ?super rdfs:subClassOf ?parent.
          ?super rdfs:label ?label.
        }
      }
   UNION
        # now harvest the class annotations 
      { ?super rdfs:subClassOf ?parent.
        ?super rdfs:label ?label.
	FILTER (?super=_ID_GOES_HERE_)
      }
   FILTER (!((?parent=alias:bacteria) || (?parent=alias:eukaryota) || (?parent=alias:viruses) || (?parent=alias:archaea) || (?parent = alias:cellularOrganism) ||
	     (?super=alias:bacteria) || (?super=alias:eukaryota) || (?super=alias:viruses) || (?super=alias:archaea) || (?super = alias:cellularOrganism)))
}

# get the label and definition for your basic OBO term.
== http://purl.org/obo/owl/.* == 
construct
{ 
  _ID_GOES_HERE_ rdf:type owl:Class.
  _ID_GOES_HERE_ alias:preferredTerm ?label.
  _ID_GOES_HERE_ rdfs:label ?label.
  _ID_GOES_HERE_ alias:definition ?definition.
}
where
{
  {   _ID_GOES_HERE_ rdfs:label ?label. }
  UNION
  {   _ID_GOES_HERE_ obo:hasDefinition ?blank.
      ?blank rdfs:label ?definition}
}


